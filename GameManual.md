# 游戏操作指南与玩法说明

## 1. 基础操作 (Controls)

### 移动与菜单
- **W / A / S / D**: 控制角色上/左/下/右移动。
- **ESC**: 打开/关闭系统菜单 (暂为返回主菜单)。在交易界面中为关闭界面。
- **M**: **电梯交互键**。当靠近矿洞入口或电梯时，按下可打开楼层选择界面。
- **Enter**: **进入下一层/房间**。当位于矿洞楼梯或房门处时，按下可进入。
- **B**: **打开背包**。在农场和矿洞中均可通过按 **B** 打开或关闭背包界面。
- **E**: **技能树 (Skills)**。打开技能加点界面，查看和升级技能。
- **P**: **市场价格/交易 (Price/Market)**。打开市场价格表（仅查看），在商人处可进行交易。
- **Tab**: **跳过时间 (Cheat)**。作弊功能，直接跳到第二天早晨（调试用）。

### 物品栏 (Toolbar)
- **数字键 1 - 0**: 切换当前手持的工具或物品。
- **减号键 (-)**: 切换到第11个物品（如蓝莓种子）。
- **鼠标滚轮**: (部分场景支持) 滚动切换物品。

### 动作交互
- **J 键**: **通用工具/攻击键**。
    - 农场：执行耕地、种植、收获、砍树。
    - 矿洞：**攻击怪物** 或 **挖掘矿石**。
    - 交易：在打开的全部容器/交易界面中，确认选择或转移物品。
    - **注意**：当**能量条变红（低于20%）**时，玩家将疲惫不堪，无法使用 J 键进行攻击或工作。
- **K 键**: **特殊交互键**。
    - **放置储物箱**：在农场空地按下，消耗50木材+100金币放置。
    - **许愿池**：在矿洞中遇到许愿池时，面对许愿池按下进行许愿。
- **Space (空格键)**: **开启箱子/对话**。
    - 靠近宝箱或储物箱时按下开启。
    - 靠近 NPC (如商人) 时按下进行对话或交易。
- **鼠标左键**: 
    - **背包管理**: 打开背包后，**单击**一个格子选中，再**单击**另一个格子可交换物品位置。
    - **钓鱼**: 仅当手持 **钓鱼竿** 时有效（抛竿/收杆/小游戏）。
    - **点击 NPC**: 也可以通过鼠标点击 NPC 进行交互。
    - **点击调试**: 在地图上点击可查看坐标信息（Debug用途）。

---

## 2. 工具与物品功能 (Tools & Items)

| 按键 | 物品名称 | 功能描述 | 操作方法 |
| :--- | :--- | :--- | :--- |
| **1** | **锄头 (Hoe)** | 开垦土地，将草地变为耕地。 | 面向目标地块，按 **J** 键。 |
| **2** | **喷壶 (Watering Can)** | 给耕地浇水，作物生长必须。 | 面向耕地，按 **J** 或 **K** 键。 |
| **3** | **镰刀 (Scythe)** | 收获已成熟的作物。 | 面向成熟作物，按 **J** 键。 |
| **4** | **斧头 (Axe)** | 砍伐树木，清理障碍。 | 面向树木（需靠近），按 **J** 键。砍树需要约2秒时间。 |
| **5** | **钓鱼竿 (Fishing Rod)** | 在水边钓鱼。 | 详见下方“海滩与钓鱼”章节。 |
| **6-0, -** | **各类种子 (Seeds)** | 种植作物 (萝卜、土豆、玉米等)。 | 面向已开垦且未种植的耕地，按 **J** 键。 |
| **(掉落)** | **剑 (Sword)** | 攻击怪物。 | 面向怪物按 **J** 键。 |

---

## 3. 核心玩法详解

### 🌾 农耕系统 (Farming)
1.  **开垦**: 切换到 **锄头 (键1)**，对着空地按 **J**，地面会变成深色耕地。
2.  **播种**: 切换到任意 **种子 (键6-0)**，对着耕地按 **J**，种子就会种下。
3.  **浇水**: 切换到 **喷壶 (键2)**，对着有作物的耕地按 **J** 或 **K**。土地变湿润即为浇水成功。
    *   *注意：每天都需要浇水，作物才会生长。*
4.  **收获**: 当作物长成最终形态后，切换到 **镰刀 (键3)**，对着作物按 **J** 进行收获。

### 🌤️ 天气系统 (Weather)
游戏包含动态天气系统，每天早晨更新天气。
-   **晴天 (Sunny)**: 正常天气，无特殊效果。
-   **雨天 (Rain)**: 
    -   所有耕地会 **自动浇水**，无需玩家手动浇水。
    -   可能会影响鱼类的出现概率（待实装）。
-   **下雪 (Snowy)**:
    -   寒冷的冬天天气，市场物价会因此上涨（影响幅度最大）。
    -   拥有独特的视觉效果。
-   **查看天气**: 
    -   **即时天气**: 留意界面右上角或通过市场界面 (按 **P**) 查看当天的天气。
    -   **未来预报**: 回到小屋 (House)，走到 **电视机** 前（进门左手边），按 **J** 键进行交互，可查看未来 7 天的天气预报。提前规划耕作更加高效！

### 💰 NPC与交易 (NPCs & Trading)
农场地图中会出现 NPC，可进行交互。
1.  **商人 (Merchant/Wizard)**: 
    -   位置：农场地图固定位置（如 [500, 400]）。
    -   **交互**: 靠近后按 **Space** 或鼠标点击。
    -   **买卖**: 在对话框中选择 "Buy" 或 "Sell"。
        -   **买**: 打开商店界面，用金币购买种子、道具。
        -   **卖**: 打开背包界面，选择物品出售换取金币。

### ⛏️ 矿洞探险 (Mining)
1.  **进入矿洞**: 在农场地图右上角找到电梯入口（坐标约 [800, 600]），**靠近后**按 **M** 键打开楼层选择界面。
2.  **战斗**: 
    -   矿洞中会生成 **史莱姆** 和 **僵尸**。
    -   **史莱姆**: 移动较快，血量低。
    -   **僵尸**: 移动较慢，血量高，攻击强。
    -   按 **J** 键使用武器进行攻击。
    -   随着层数深入（Floor 1 -> 5），怪物会变得更强。
3.  **挖矿**: 
    -   分布着 **铜矿**、**银矿**、**金矿**。对准矿石按 **J** 挖掘。
    -   **注意能量**：挖掘消耗能量。
4.  **许愿池 (Wishing Well)**:
    -   **出现条件**: 只在 **第 5 层** 及其倍数层，且有一定概率出现。
    -   **玩法**: 手持一个物品，靠近按下 **K** 键投入许愿池。
    -   **奖励**: 可能返还金币、回复生命，甚至获得稀有武器（如金剑、钻石剑）。
5.  **宝箱**: 探索寻找金色宝箱，按 **Space** 开启。同一层宝箱每周只刷新一次。
6.  **切换楼层**: 靠近 **电梯井**，按 **J** 键打开楼层选择界面，选择想要前往的楼层。

### 📦 储物箱系统 (Storage Chests)
1.  **放置**: 确保有 **50 木材** 和 **100 金币**，在空地按 **K** 放置。
2.  **使用**: 靠近按 **Space** 打开。
3.  **物品管理**: 按 **J** 键在背包和箱子间转移物品。

### 🏖️ 海滩与钓鱼 (Beach & Fishing)
新的海滩地图已开放！
1.  **前往海滩**: 从农场地图的右侧边缘离开（或特定传送点），即可进入海滩地图。
2.  **钓鱼玩法**:
    -   **准备**: 切换到 **钓鱼竿 (键5)**。
    -   **抛竿**: **按住鼠标左键** 蓄力，松开抛出。
    -   **等待**: 等待头顶出现 **黄色感叹号 (!)**。
    -   **提竿**: 出现感叹号时 **立即点击左键**。
    -   **小游戏**: 
        -   按住左键提升绿色滑块，松开下降。
        -   保持滑块覆盖小鱼图标，直到右侧进度条填满。
3.  **技能影响**: 钓鱼技能等级越高，滑块越好控制，收益越高。

### 🎓 技能系统 (Skills)
按 **E** 键打开技能树界面。
游戏中有 4 种技能，通过对应行为升级：
1.  **农业 (Agriculture)**: 耕种、收获提升。升级可增加收获额外产出概率。
2.  **采矿 (Mining)**: 挖矿提升。升级可减少挖矿时的体力消耗。
3.  **钓鱼 (Fishing)**: 钓鱼提升。升级可增加鱼的价格和钓鱼容错率。
4.  **烹饪 (Cooking)**: (待实装) 制作食物提升。

---

## 4. 游戏机制说明 (Game Mechanics)

### ⏰ 时间与生存系统 (Survival)
- **时间**: 每天6:00开始，0:00强制睡觉。
- **晕倒**: 0:00未睡或体力耗尽，会晕倒并扣除金币，次日恢复。
- **死亡**: 矿洞中 HP 归零，丢失背包物品并扣钱。
- **能量**: 能量红色时无法工作。吃东西或睡觉恢复。

### 🛡️ 战斗细节
- **无敌时间**: 受伤后短暂无敌。
- **击退**: 攻击怪物会将其击退，利用地形卡怪。

### 🧪 作弊与调试 (Cheats)
为了方便测试，游戏内置了部分调试功能：
- **Tab 键**: **跳过一天**。直接快进到下一天早上 6:00。
- **F1 / F2 / F3 ...**: (如果有) 快速获取特定物品。

### 📍 位置判定
- 所有农耕/放置操作基于玩家脚下 **瓦片坐标**。
- 如果操作无效，请微调站位。
