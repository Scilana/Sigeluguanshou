# 游戏操作指南与玩法说明

## 1. 基础操作 (Controls)

### 移动与菜单
- **W / A / S / D**: 控制角色上/左/下/右移动。
- **ESC**: 打开/关闭系统菜单 (暂为返回主菜单)。
- **M**: **电梯交互键**。当位于农场电梯入口处时，按下可打开楼层选择界面。
- **Enter**: **进入下一层**。当位于矿洞楼梯处时，按下可进入下一层。
- **B**: **打开背包**。在农场和矿洞中均可通过按 **B** 打开或关闭背包界面。

### 物品栏 (Toolbar)
- **数字键 1 - 0**: 切换当前手持的工具或物品。
- **减号键 (-)**: 切换到第11个物品（蓝莓种子）。
- **鼠标滚轮**: (如果有实现) 也可以尝试滚动切换物品。

### 动作交互
- **J 键**: **通用工具/攻击键**。
    - 农场：执行耕地、种植、收获、砍树。
    - 矿洞：**攻击怪物** 或 **挖掘矿石**。
    - **注意**：当**能量条变红（低于20%）**时，玩家将即疲惫不堪，无法使用 J 键进行攻击或工作。
- **K 键**: **快捷浇水键**。仅当手持喷壶时有效，用于执行浇水动作。
- **Space (空格键)**: **开启宝箱**。当靠近宝箱时按下。
- **鼠标左键**: 
    - **背包管理**: 打开背包后，**单击**一个格子选中，再**单击**另一个格子可交换物品位置。
    - **钓鱼**: 仅当手持 **钓鱼竿** 时有效。
    - **点击调试**: 在地图上点击可查看坐标信息（Debug用途）。

---

## 2. 工具与物品功能 (Tools & Items)

| 按键 | 物品名称 | 功能描述 | 操作方法 |
| :--- | :--- | :--- | :--- |
| **1** | **锄头 (Hoe)** | 开垦土地，将草地变为耕地。 | 面向目标地块，按 **J** 键。 |
| **2** | **喷壶 (Watering Can)** | 给耕地浇水，作物生长必须。 | 面向耕地，按 **J** 或 **K** 键。 |
| **3** | **镰刀 (Scythe)** | 收获已成熟的作物。 | 面向成熟作物，按 **J** 键。 |
| **4** | **斧头 (Axe)** | 砍伐树木，清理障碍。 | 面向树木（需靠近），按 **J** 键。砍树需要约2秒时间。 |
| **5** | **钓鱼竿 (Fishing Rod)** | 在水边钓鱼。 | 详见下方“钓鱼玩法”章节。 |
| **6-0, -** | **各类种子 (Seeds)** | 种植作物 (萝卜、土豆、玉米等)。 | 面向已开垦且未种植的耕地，按 **J** 键。 |
| **(掉落)** | **剑 (Sword)** | 攻击怪物。 | 面向怪物按 **J** 键。 |

---

## 3. 核心玩法详解

### 🌾 农耕系统 (Farming)
1.  **开垦**: 切换到 **锄头 (键1)**，对着空地按 **J**，地面会变成深色耕地。
2.  **播种**: 切换到任意 **种子 (键6-0)**，对着耕地按 **J**，种子就会种下。
3.  **浇水**: 切换到 **喷壶 (键2)**，对着有作物的耕地按 **J** 或 **K**。土地变湿润即为浇水成功。
    *   *注意：每天都需要浇水，作物才会生长。*
4.  **收获**: 当作物长成最终形态后，切换到 **镰刀 (键3)**，对着作物按 **J** 进行收获。

### ⛏️ 矿洞探险 (Mining)
1.  **进入矿洞**: 在农场地图右上角找到电梯入口（坐标约 [800, 600]），按 **M** 键打开楼层选择界面。
2.  **战斗**: 
    - 矿洞中会生成 **史莱姆** 和 **僵尸**。
    - **史莱姆**: 移动较快，血量低。
    - **僵尸**: 移动较慢，血量高，攻击强。
    - 按 **J** 键使用武器进行攻击。小心怪物的反击！
    - 随着层数深入（Floor 1 -> 4），怪物会变得更强。
3.  **挖矿**: 
    - 矿洞中分布着 **铜矿**、**银矿**、**金矿**。
    - 对准矿石按 **J** 键进行挖掘，左下角会显示获得的物品（例如 "Found 2 Gold Ore!"）。
    - 深层矿洞有更高概率生成稀有矿石（银、金）。
    - **注意能量**：挖掘消耗能量，能量耗尽将无法工作。
4.  **宝箱**:
    - 探索地图寻找金色宝箱。
    - 靠近后按 **Space (空格)** 开启。
    - **刷新规则**：同一层的宝箱在**同一游戏周（Week）**内只能开启一次。一旦开启，即使再次进入该层也不会刷新，直到下一周。
5.  **下一层**: 找到地图中的楼梯，站在上面按 **Enter** 键进入下一层。

### 🎣 钓鱼系统 (Fishing)
1.  **准备**: 切换到 **钓鱼竿 (键5)**。
2.  **抛竿**: 
    - **按住鼠标左键** 进行蓄力（观察头顶蓄力条）。
    - 松开左键将鱼漂抛出。
3.  **等待**: 等待几秒钟，直到头顶出现 **黄色感叹号 (!)** 提示。
4.  **提竿**: 在感叹号出现的短时间内，**立即点击鼠标左键**。
    - 如果反应太慢，鱼会逃跑。
    - 如果反应及时，进入钓鱼小游戏。
5.  **博弈 (小游戏)**:
    - 界面左侧会出现一个竖条，包含一个 **绿色滑块** 和一条 **小鱼**。
    - **按住鼠标左键**: 绿色滑块上升。
    - **松开鼠标左键**: 绿色滑块下降。
    - **目标**: 这里通过控制按压频率，让 **绿色滑块始终覆盖住小鱼**。
    - 右侧的进度条会根据覆盖情况涨跌。进度条填满变绿时，钓鱼成功！

### 🌲 资源采集
- **砍树**: 切换到 **斧头 (键4)**，靠近树木按 **J**。会触发一个延时动作（模拟砍树过程），完成后树木消失。

---

## 4. 游戏机制说明 (Game Mechanics)

### ⏰ 时间与生存系统 (Survival)
- **时间流逝**: 
    - 游戏每一天从 **早上 6:00** 开始。
    - 时间会在农场和矿洞中同步流逝。
- **午夜晕倒 (Midnight Fatigue)**:
    - 必须在 **晚上 12:00 (0:00)**之前上床睡觉。
    - 如果时间到达 0:00 玩家仍未睡觉，会因疲劳过度晕倒：
        - **惩罚**: 扣除 **20金币**。
        - **后果**: 强制送回小屋并在次日 **6:00 AM** 醒来。
- **矿洞死亡 (Death)**:
    - 如果在矿洞中生命值 (HP) 归零：
        - **惩罚**: **清空背包内所有物品** (丢失所有战利品！)。
        - **后果**: 强制送回小屋并在次日 **6:00 AM** 醒来。
- **能量限制**:
    - 攻击、挖掘、耕作都会消耗能量。
    - 能量条变红 (<=20%) 时，**所有 J 键动作将被禁用**。请及时睡觉或吃东西（如暂未实装食物，则只能睡觉）恢复。

### 🛡️ 战斗细节
- **无敌时间**:
    - 玩家受到伤害后会短暂闪烁并进入无敌状态，避免连续受伤。
    - 请利用此时间拉开距离。

### 📍 位置判定
- 所有的农耕操作都基于玩家脚下的 **瓦片坐标 (Tile Coordinate)**。
- 如果操作不生效，请尝试微调站位，确保角色中心对准目标格子。
